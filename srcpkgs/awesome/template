# Template file for 'awesome'
pkgname=awesome
version=4.3
revision=6
build_style=cmake
build_helper="qemu"
configure_args="-DSYSCONFDIR=/etc"
conf_files="/etc/xdg/awesome/rc.lua"
hostmakedepends="ruby-asciidoctor ImageMagick lua53-lgi lua53 pkg-config xmlto"
makedepends="git libxcb-devel pango-devel xcb-util-devel xcb-util-image-devel
 xcb-util-keysyms-devel xcb-util-wm-devel xcb-util-cursor-devel
 startup-notification-devel imlib2-devel lua53-lgi libxdg-basedir-devel
 gdk-pixbuf-devel lua53-devel dbus-devel libxkbcommon-devel xcb-util-xrm-devel"
depends="dbus-x11 lua53-lgi>=0.7.2 pango"
short_desc="Highly configurable, next gen framework window manager for X"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="http://awesomewm.org"

do_fetch() {
	git clone https://github.com/awesomeWM/awesome.git ${wrksrc}
}

pre_configure() {
	# Russian manpages fail to build.
	vsed -i -e "s|es fr de ru|es fr de|g" CMakeLists.txt
}

post_install() {
	vinstall awesome.desktop 644 usr/share/xsessions
}
